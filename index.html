<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HILE_WROX | VIP PANEL v3</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --dark: #070b14; --card: #121826; --blue: #3b82f6; --text: #e2e8f0; }
        body { background-color: var(--dark); color: var(--text); font-family: 'Segoe UI', sans-serif; }
        
        .sidebar { position: fixed; left: -280px; top: 0; width: 280px; height: 100%; background: var(--card); transition: 0.3s; z-index: 1050; border-right: 1px solid #2d3748; }
        .sidebar.active { left: 0; }
        .sidebar-link { padding: 15px 25px; display: block; color: #94a3b8; text-decoration: none; border-bottom: 1px solid #1e293b; transition: 0.2s; }
        .sidebar-link:hover { background: #1e293b; color: var(--blue); }

        .top-bar { background: var(--card); padding: 15px 20px; display: flex; align-items: center; border-bottom: 1px solid #2d3748; }
        .main-container { padding: 25px; }
        
        /* DETAYLI KART TASARIMI */
        .res-card { background: var(--card); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid #2d3748; border-left: 6px solid var(--blue); }
        .data-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #1e293b; }
        .data-label { color: #64748b; font-size: 0.85rem; font-weight: bold; text-transform: uppercase; }
        .data-value { color: #fff; font-size: 0.95rem; text-align: right; }
        
        .badge-yakinlik { background: var(--blue); color: white; padding: 4px 10px; border-radius: 6px; font-size: 0.75rem; margin-bottom: 10px; display: inline-block; }
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1040; }
    </style>
</head>
<body>

<div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

<div class="sidebar" id="sidebar">
    <div class="p-4 text-center border-bottom border-secondary">
        <h4 class="text-primary fw-bold">@HILE_WROX</h4>
        <span class="badge bg-primary">VIP: Efecan1903</span>
    </div>
    <div class="sidebar-links">
        <a href="#" class="sidebar-link" onclick="init('soyagaci', 'üß¨ Soyaƒüacƒ± PRO')"><i class="fa fa-dna me-2"></i> Soyaƒüacƒ±</a>
        <a href="#" class="sidebar-link" onclick="init('sulale', 'üå≥ S√ºlale Sorgu')"><i class="fa fa-tree me-2"></i> S√ºlale</a>
        <a href="#" class="sidebar-link" onclick="init('adsoyadpro', 'üë§ Ad Soyad ƒ∞l PRO')"><i class="fa fa-users me-2"></i> Ad Soyad ƒ∞l</a>
        <a href="#" class="sidebar-link" onclick="init('tcpro', 'üÜî TC PRO')"><i class="fa fa-id-card me-2"></i> TC PRO</a>
        <a href="#" class="sidebar-link" onclick="init('isyeri', 'üè¢ ƒ∞≈üyeri Sorgu')"><i class="fa fa-building me-2"></i> ƒ∞≈üyeri</a>
        <a href="#" class="sidebar-link" onclick="init('adrespro', 'üìç Adres PRO')"><i class="fa fa-map-pin me-2"></i> Adres PRO</a>
        <a href="#" class="sidebar-link" onclick="init('gsmtc', 'üìû GSM -> TC')"><i class="fa fa-phone me-2"></i> GSM -> TC</a>
    </div>
</div>

<div class="top-bar">
    <i class="fa fa-bars fs-3 text-primary" style="cursor:pointer;" onclick="toggleSidebar()"></i>
    <h5 class="ms-3 mb-0" id="title">üß¨ Soyaƒüacƒ± PRO</h5>
</div>

<div class="main-container container">
    <div class="bg-dark p-4 rounded-3 border border-secondary mb-4">
        <div id="input-area">
            <input type="text" id="val" class="form-control bg-dark text-white border-secondary py-3" placeholder="TC No Girin...">
        </div>
        <button class="btn btn-primary w-100 mt-3 py-3 fw-bold" onclick="fetchData()">SORGULA</button>
    </div>

    <div id="loading" class="text-center my-5" style="display:none;">
        <div class="spinner-border text-primary"></div>
        <p class="mt-2 text-muted">Soyaƒüacƒ± k√∂kleri taranƒ±yor, bekleyin...</p>
    </div>

    <div id="results"></div>
</div>

<script>
    let currentMode = 'soyagaci';

    function toggleSidebar() {
        document.getElementById('sidebar').classList.toggle('active');
        const overlay = document.getElementById('overlay');
        overlay.style.display = (overlay.style.display === 'block') ? 'none' : 'block';
    }

    function init(op, title) {
        currentMode = op;
        document.getElementById('title').innerText = title;
        const area = document.getElementById('input-area');
        document.getElementById('results').innerHTML = "";
        
        if(op === 'adsoyadpro') {
            area.innerHTML = `
                <input type="text" id="ad" class="form-control mb-2 bg-dark text-white border-secondary" placeholder="Ad">
                <input type="text" id="soyad" class="form-control mb-2 bg-dark text-white border-secondary" placeholder="Soyad">
                <input type="text" id="il" class="form-control mb-2 bg-dark text-white border-secondary" placeholder="ƒ∞l (Opsiyonel)">
            `;
        } else {
            area.innerHTML = `<input type="text" id="val" class="form-control bg-dark text-white border-secondary py-3" placeholder="TC veya Veri girin...">`;
        }
        toggleSidebar();
    }

    async function fetchData() {
        const resDiv = document.getElementById('results');
        const loader = document.getElementById('loading');
        resDiv.innerHTML = ""; loader.style.display = "block";

        let url = `https://punisher.alwaysdata.net/apiservices/${currentMode}.php`;
        if(currentMode === 'sulale') url = "https://arastir.sbs/api/sulale.php";
        if(currentMode === 'adrespro') url = "https://arastir.sbs/api/adres.php";

        let p = new URLSearchParams();
        if(currentMode === 'adsoyadpro') {
            p.append('ad', document.getElementById('ad').value);
            p.append('soyad', document.getElementById('soyad').value);
            p.append('il', document.getElementById('il').value);
        } else {
            let v = document.getElementById('val').value;
            p.append('tc', v); p.append('tcno', v); p.append('gsm', v);
        }

        try {
            const response = await fetch(url + "?" + p.toString());
            const json = await response.json();
            loader.style.display = "none";

            // üî• SOYAƒûACI Fƒ∞X: ƒ∞√ß i√ße ge√ßmi≈ü listeleri bul (Deep Search)
            let dataList = [];
            if (Array.isArray(json)) dataList = json;
            else if (json.soyagaci) dataList = json.soyagaci;
            else if (json.data) dataList = Array.isArray(json.data) ? json.data : [json.data];
            else if (json.results) dataList = json.results;
            else dataList = [json];

            if(!dataList || dataList.length === 0 || dataList[0] === null) {
                resDiv.innerHTML = '<div class="alert alert-warning text-center">‚ùå Kayƒ±t bulunamadƒ±.</div>';
                return;
            }

            let html = `<h5 class="mb-4 text-info">${dataList.length} Ki≈üi bulundu.</h5>`;
            
            dataList.forEach(item => {
                // Her objeyi temizle ve deƒüerleri yakala
                let clean = {};
                Object.keys(item).forEach(k => { clean[k.toLowerCase()] = item[k]; });

                let adSoyad = `${clean.ad || clean.adi || ''} ${clean.soyad || clean.soyadi || ''}`.trim();
                let yakinlik = clean.yakinlik || clean.iliski || clean.tip || "Ki≈üi";
                
                html += `
                <div class="res-card">
                    <div class="badge-yakinlik">${yakinlik.toUpperCase()}</div>
                    <div class="data-row"><span class="data-label">TAM ADI:</span><span class="data-value text-primary fw-bold">${adSoyad || 'Bilinmiyor'}</span></div>
                    <div class="data-row"><span class="data-label">TC NO:</span><span class="data-value text-warning">${clean.tc || clean.tcno || clean.tc_no || '---'}</span></div>
                    <div class="data-row"><span class="data-label">DOƒûUM:</span><span class="data-value">${clean.dogum || clean.dogumtarihi || clean.dtarih || '---'}</span></div>
                    <div class="data-row"><span class="data-label">Bƒ∞LGƒ∞ / ƒ∞L:</span><span class="data-value">${clean.il || clean.adres || clean.isyeri_adi || '---'}</span></div>
                    <div class="data-row"><span class="data-label">ANNE / BABA:</span><span class="data-value">${clean.anneadi || ''} / ${clean.babaadi || ''}</span></div>
                    <div class="data-row">
                        <span class="data-label">DURUM:</span>
                        <span class="data-value fw-bold ${clean.olum || clean.olumtarihi ? 'text-danger' : 'text-success'}">
                            ${clean.olum || clean.olumtarihi ? 'VEFAT ('+ (clean.olum || clean.olumtarihi) +')' : 'HAYATTA'}
                        </span>
                    </div>
                </div>`;
            });
            resDiv.innerHTML = html;

        } catch (e) {
            loader.style.display = "none";
            resDiv.innerHTML = '<div class="alert alert-danger text-center">‚ö†Ô∏è Sunucu Hatasƒ±: API eri≈üimi reddedildi veya JSON formatƒ± bozuk.</div>';
        }
    }
</script>
</body>
</html>

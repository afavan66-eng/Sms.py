<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HILE_WROX | VIP SOURCE</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --main-bg: #0b0e14; --card-bg: #151921; --accent: #3b82f6; --text-muted: #94a3b8; }
        body { background-color: var(--main-bg); color: #e2e8f0; font-family: 'Inter', sans-serif; }
        
        /* Hamburger Sidebar */
        .sidebar { position: fixed; left: -280px; top: 0; width: 280px; height: 100%; background: var(--card-bg); transition: 0.3s ease; z-index: 1050; border-right: 1px solid #2d3748; }
        .sidebar.active { left: 0; }
        .sidebar-link { padding: 15px 25px; display: block; color: #cbd5e1; text-decoration: none; border-bottom: 1px solid #1f2937; }
        .sidebar-link:hover { background: #1e293b; color: var(--accent); }

        /* Content Area */
        .top-bar { background: var(--card-bg); padding: 15px 20px; display: flex; align-items: center; border-bottom: 1px solid #2d3748; }
        .query-card { background: var(--card-bg); border-radius: 12px; padding: 25px; margin-top: 20px; border: 1px solid #2d3748; }
        
        /* Result Item (T√ºm Bilgileri G√∂steren Kart) */
        .result-item { background: #0f172a; border-radius: 10px; padding: 18px; margin-bottom: 15px; border-left: 4px solid var(--accent); position: relative; }
        .field-row { display: flex; justify-content: space-between; margin-bottom: 4px; border-bottom: 1px solid #1e293b; padding-bottom: 2px; }
        .label { color: var(--text-muted); font-size: 0.8rem; font-weight: 600; text-transform: uppercase; }
        .value { color: #fff; font-size: 0.95rem; font-weight: 500; }
        
        .status-alive { color: #10b981; font-weight: bold; }
        .status-dead { color: #ef4444; font-weight: bold; }
        
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1040; }
    </style>
</head>
<body>

<div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

<div class="sidebar" id="sidebar">
    <div class="p-4 text-center">
        <h4 class="text-primary fw-bold">@HILE_WROX</h4>
        <small class="text-muted">Efecan1903 VIP Panel</small>
    </div>
    <div class="sidebar-links">
        <a href="#" class="sidebar-link" onclick="ui('soyagaci', 'üß¨ Soyaƒüacƒ± PRO')"><i class="fa fa-dna me-2"></i> Soyaƒüacƒ±</a>
        <a href="#" class="sidebar-link" onclick="ui('sulale', 'üå≥ S√ºlale Sorgu')"><i class="fa fa-tree me-2"></i> S√ºlale</a>
        <a href="#" class="sidebar-link" onclick="ui('adsoyadpro', 'üë§ Ad Soyad ƒ∞l PRO')"><i class="fa fa-users me-2"></i> Ad Soyad ƒ∞l</a>
        <a href="#" class="sidebar-link" onclick="ui('tcpro', 'üÜî TC PRO')"><i class="fa fa-id-card me-2"></i> TC PRO</a>
        <a href="#" class="sidebar-link" onclick="ui('isyeri', 'üè¢ ƒ∞≈üyeri Sorgu')"><i class="fa fa-briefcase me-2"></i> ƒ∞≈üyeri</a>
        <a href="#" class="sidebar-link" onclick="ui('isyeriark', 'üë• ƒ∞≈ü Arkada≈ülarƒ±')"><i class="fa fa-user-group me-2"></i> ƒ∞≈ü Arkada≈üƒ±</a>
        <a href="#" class="sidebar-link" onclick="ui('adrespro', 'üìç Adres PRO')"><i class="fa fa-map-marker-alt me-2"></i> Adres PRO</a>
        <a href="#" class="sidebar-link" onclick="ui('gsmtc', 'üìû GSM -> TC')"><i class="fa fa-phone me-2"></i> GSM -> TC</a>
    </div>
</div>

<div class="top-bar">
    <i class="fa fa-bars fs-3 text-primary" style="cursor:pointer;" onclick="toggleSidebar()"></i>
    <h5 class="ms-3 mb-0" id="current-title">üß¨ Soyaƒüacƒ± PRO</h5>
</div>

<div class="container">
    <div class="query-card shadow">
        <div id="inputs">
            <label class="mb-2">Sorgulanacak TC No:</label>
            <input type="text" id="q_val" class="form-control bg-dark text-white border-secondary py-3" placeholder="11 haneli TC girin...">
        </div>
        <button class="btn btn-primary w-100 mt-3 py-3 fw-bold" onclick="startQuery()">SORGULA</button>
    </div>

    <div id="loading" class="text-center mt-5" style="display:none;">
        <div class="spinner-border text-primary"></div>
        <p class="mt-2 text-muted">Veriler derinlemesine taranƒ±yor, l√ºtfen bekle...</p>
    </div>

    <div id="results" class="mt-4"></div>
</div>

<script>
    let activeOp = 'soyagaci';

    function toggleSidebar() {
        document.getElementById('sidebar').classList.toggle('active');
        const overlay = document.getElementById('overlay');
        overlay.style.display = (overlay.style.display === 'block') ? 'none' : 'block';
    }

    function ui(op, title) {
        activeOp = op;
        document.getElementById('current-title').innerText = title;
        const inputDiv = document.getElementById('inputs');
        document.getElementById('results').innerHTML = "";
        
        if(op === 'adsoyadpro') {
            inputDiv.innerHTML = `
                <input type="text" id="ad" class="form-control mb-2 bg-dark text-white border-secondary" placeholder="ƒ∞sim">
                <input type="text" id="soyad" class="form-control mb-2 bg-dark text-white border-secondary" placeholder="Soyisim">
                <input type="text" id="il" class="form-control mb-3 bg-dark text-white border-secondary" placeholder="ƒ∞l (T√ºm TR i√ßin bo≈ü bƒ±rak)">
            `;
        } else {
            let p = op === 'gsmtc' ? 'GSM No girin...' : 'TC No girin...';
            inputDiv.innerHTML = `<label class="mb-2">Veri Girin:</label><input type="text" id="q_val" class="form-control bg-dark text-white border-secondary py-3" placeholder="${p}">`;
        }
        toggleSidebar();
    }

    async function startQuery() {
        const resDiv = document.getElementById('results');
        const loading = document.getElementById('loading');
        resDiv.innerHTML = "";
        loading.style.display = "block";

        let url = `https://punisher.alwaysdata.net/apiservices/${activeOp}.php`;
        if(activeOp === 'sulale') url = "https://arastir.sbs/api/sulale.php";
        if(activeOp === 'adrespro') url = "https://arastir.sbs/api/adres.php";

        let p = new URLSearchParams();
        if(activeOp === 'adsoyadpro') {
            p.append('ad', document.getElementById('ad').value);
            p.append('soyad', document.getElementById('soyad').value);
            p.append('il', document.getElementById('il').value);
        } else {
            let v = document.getElementById('q_val').value;
            p.append('tc', v); p.append('tcno', v); p.append('gsm', v);
        }

        try {
            const response = await fetch(url + "?" + p.toString());
            const data = await response.json();
            loading.style.display = "none";

            // üî• KRƒ∞Tƒ∞K NOKTA: Veriyi her katmanda ara (soyagaci, results, data vb.)
            let cleanData = data.soyagaci || data.results || data.data || data.result || data.Sulale || (Array.isArray(data) ? data : [data]);

            if(!cleanData || cleanData.length === 0 || cleanData[0] === null) {
                resDiv.innerHTML = '<div class="alert alert-warning text-center">‚ùå Kayƒ±t bulunamadƒ±.</div>';
                return;
            }

            let html = `<h5 class="mb-3 text-info fw-bold">${cleanData.length} Kayƒ±t Getirildi</h5>`;
            cleanData.forEach(item => {
                // Anahtarlarƒ± normalize et (B√ºy√ºk/K√º√ß√ºk harf duyarlƒ±lƒ±ƒüƒ± fix)
                let row = {};
                for (let key in item) { row[key.toLowerCase()] = item[key]; }

                let ad = row.ad || row.adi || row.name || "";
                let soyad = row.soyad || row.soyadi || row.surname || "";
                let tc = row.tc || row.tcno || row.tc_no || "Bilinmiyor";
                let dogum = row.dogum || row.dogumtarihi || row.dtarih || "";
                let yakinlik = row.yakinlik || row.iliski || row.tip || "Ki≈üi";
                let adres = row.il || row.ilce || row.adres || row.ikametgah || "";
                let olum = row.olumtarihi || row.olum || "";

                html += `
                <div class="result-item">
                    <div class="field-row"><span class="label">YAKINLIK</span><span class="value text-primary">${yakinlik.toUpperCase()}</span></div>
                    <div class="field-row"><span class="label">AD SOYAD</span><span class="value">${ad} ${soyad}</span></div>
                    <div class="field-row"><span class="label">TC NO</span><span class="value text-warning">${tc}</span></div>
                    ${dogum ? `<div class="field-row"><span class="label">DOƒûUM TARƒ∞Hƒ∞</span><span class="value">${dogum}</span></div>` : ''}
                    ${adres ? `<div class="field-row"><span class="label">Bƒ∞LGƒ∞/ADRES</span><span class="value text-muted">${adres}</span></div>` : ''}
                    <div class="field-row">
                        <span class="label">DURUM</span>
                        <span class="${olum ? 'status-dead' : 'status-alive'}">${olum ? 'VEFAT ('+olum+')' : 'HAYATTA'}</span>
                    </div>
                </div>`;
            });
            resDiv.innerHTML = html;

        } catch (e) {
            loading.style.display = "none";
            resDiv.innerHTML = '<div class="alert alert-danger">‚ö†Ô∏è API Hatasƒ±! Veri √ßekilemedi veya API kapalƒ±.</div>';
        }
    }
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HILE_WROX | VIP Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --bg-dark: #0f172a; --card-bg: #1e293b; --accent: #3b82f6; --text: #f8fafc; }
        body { background-color: var(--bg-dark); color: var(--text); font-family: 'Inter', sans-serif; overflow-x: hidden; }
        
        /* Hamburger Sidebar */
        .sidebar { position: fixed; left: -280px; top: 0; width: 280px; height: 100vh; background: var(--card-bg); transition: 0.4s ease; z-index: 1050; border-right: 1px solid #334155; padding-top: 20px; }
        .sidebar.active { left: 0; }
        .sidebar-header { padding: 20px; text-align: center; border-bottom: 1px solid #334155; }
        .sidebar-menu a { padding: 15px 25px; display: block; color: #cbd5e1; text-decoration: none; transition: 0.3s; border-left: 4px solid transparent; }
        .sidebar-menu a:hover, .sidebar-menu a.active { background: #334155; color: white; border-left-color: var(--accent); }

        /* Navbar & Content */
        .top-nav { background: var(--card-bg); padding: 15px 25px; display: flex; align-items: center; border-bottom: 1px solid #334155; }
        .menu-btn { font-size: 24px; cursor: pointer; color: var(--accent); }
        .main-container { padding: 30px; transition: 0.4s; }
        .query-card { background: var(--card-bg); border-radius: 15px; padding: 25px; border: 1px solid #334155; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        
        /* Results */
        .res-item { background: #0f172a; border-radius: 10px; padding: 20px; border-left: 5px solid var(--accent); margin-bottom: 15px; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .form-control { background: #0f172a; border: 1px solid #475569; color: white; border-radius: 8px; padding: 12px; }
        .form-control:focus { background: #0f172a; color: white; border-color: var(--accent); box-shadow: none; }
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1040; }
    </style>
</head>
<body>

<div class="overlay" id="overlay" onclick="toggleMenu()"></div>

<div class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <h3 class="text-primary">@HILE_WROX</h3>
        <small class="text-muted">VIP Sorgu Paneli</small>
    </div>
    <div class="sidebar-menu">
        <a href="javascript:void(0)" onclick="setOp('soyagaci', 'üß¨ Soyaƒüacƒ± Sorgu')" class="active"><i class="fa fa-dna me-2"></i> Soyaƒüacƒ±</a>
        <a href="javascript:void(0)" onclick="setOp('sulale', 'üå≥ S√ºlale Sorgu')"><i class="fa fa-tree me-2"></i> S√ºlale</a>
        <a href="javascript:void(0)" onclick="setOp('tcpro', 'üÜî TC PRO Sorgu')"><i class="fa fa-id-card me-2"></i> TC PRO</a>
        <a href="javascript:void(0)" onclick="setOp('adsoyadpro', 'üë§ Ad Soyad ƒ∞l PRO')"><i class="fa fa-users me-2"></i> Ad Soyad ƒ∞l</a>
        <a href="javascript:void(0)" onclick="setOp('isyeri', 'üè¢ ƒ∞≈üyeri Sorgu')"><i class="fa fa-building me-2"></i> ƒ∞≈üyeri</a>
        <a href="javascript:void(0)" onclick="setOp('isyeriark', 'üë• ƒ∞≈ü Arkada≈ülarƒ±')"><i class="fa fa-user-group me-2"></i> ƒ∞≈ü Arkada≈üƒ±</a>
        <a href="javascript:void(0)" onclick="setOp('iban', 'üí≥ IBAN √á√∂z√ºc√º')"><i class="fa fa-credit-card me-2"></i> IBAN √á√∂z√ºc√º</a>
        <a href="javascript:void(0)" onclick="setOp('okulno', 'üéì Okul No Sorgu')"><i class="fa fa-graduation-cap me-2"></i> Okul No</a>
        <a href="javascript:void(0)" onclick="setOp('gsmtc', 'üìû GSM -> TC')"><i class="fa fa-phone me-2"></i> GSM TC</a>
    </div>
</div>

<div class="top-nav">
    <i class="fa fa-bars menu-btn" onclick="toggleMenu()"></i>
    <h5 class="ms-4 mb-0" id="current-title">üß¨ Soyaƒüacƒ± Sorgu</h5>
</div>

<div class="main-container container">
    <div class="query-card">
        <div id="input-fields">
            <input type="text" id="main_input" class="form-control mb-3" placeholder="TC Kimlik No Girin...">
        </div>
        <button class="btn btn-primary w-100 py-3 fw-bold" onclick="runSorgu()">SORGULA</button>
    </div>

    <div id="results" class="mt-5">
        </div>
</div>

<script>
    let currentOp = 'soyagaci';

    function toggleMenu() {
        document.getElementById('sidebar').classList.toggle('active');
        const overlay = document.getElementById('overlay');
        overlay.style.display = overlay.style.display === 'block' ? 'none' : 'block';
    }

    function setOp(op, title) {
        currentOp = op;
        document.getElementById('current-title').innerText = title;
        const inputArea = document.getElementById('input-fields');
        document.getElementById('results').innerHTML = "";
        
        // Ad Soyad ƒ∞l i√ßin √∂zel 3'l√º input
        if(op === 'adsoyadpro') {
            inputArea.innerHTML = `
                <input type="text" id="ad" class="form-control mb-2" placeholder="Ad">
                <input type="text" id="soyad" class="form-control mb-2" placeholder="Soyad">
                <input type="text" id="il" class="form-control mb-3" placeholder="ƒ∞l (Opsiyonel)">
            `;
        } else {
            let placeholder = op === 'iban' ? 'IBAN No Girin...' : (op === 'gsmtc' ? 'GSM No Girin...' : 'TC No Girin...');
            inputArea.innerHTML = `<input type="text" id="main_input" class="form-control mb-3" placeholder="${placeholder}">`;
        }
        toggleMenu();
    }

    async function runSorgu() {
        const resDiv = document.getElementById('results');
        resDiv.innerHTML = '<div class="text-center"><div class="spinner-border text-primary"></div><p class="mt-2">Veriler √ßekiliyor, bekle...</p></div>';

        let url = `https://punisher.alwaysdata.net/apiservices/${currentOp}.php`;
        if(currentOp === 'sulale') url = "https://arastir.sbs/api/sulale.php";
        
        let params = new URLSearchParams();
        if(currentOp === 'adsoyadpro') {
            params.append('ad', document.getElementById('ad').value);
            params.append('soyad', document.getElementById('soyad').value);
            params.append('il', document.getElementById('il').value);
        } else {
            let val = document.getElementById('main_input').value;
            params.append('tc', val); params.append('tcno', val); params.append('gsm', val); params.append('iban', val);
        }

        try {
            const resp = await fetch(url + "?" + params.toString());
            const data = await resp.json();
            
            // Botta kullandƒ±ƒüƒ±mƒ±z derin tarama mantƒ±ƒüƒ±
            let finalData = data.soyagaci || data.data || data.results || data.result || (Array.isArray(data) ? data : [data]);

            if(!finalData || finalData.length === 0 || finalData[0] === null) {
                resDiv.innerHTML = '<div class="alert alert-danger">‚ùå Kayƒ±t bulunamadƒ±!</div>';
                return;
            }

            let html = `<h4 class="mb-4 text-success">${finalData.length} Kayƒ±t Bulundu</h4>`;
            finalData.forEach(person => {
                html += `
                <div class="res-item">
                    <div class="row">
                        <div class="col-md-6">
                            <span class="text-muted small">AD SOYAD</span><br>
                            <b class="text-white">${person.Ad || person.adi || 'Bilinmiyor'} ${person.Soyad || person.soyadi || ''}</b>
                        </div>
                        <div class="col-md-6">
                            <span class="text-muted small">TC NO</span><br>
                            <b class="text-accent">${person.TC || person.tcno || person.tc_no || 'Bilinmiyor'}</b>
                        </div>
                        <div class="col-12 mt-2">
                            <span class="text-muted small">DURUM / YAKINLIK</span><br>
                            <span>${person.Yakinlik || person.iliski || person.tip || 'Ki≈üi'}</span> - 
                            <span class="${person.OlumTarihi ? 'text-danger' : 'text-success'}">${person.OlumTarihi ? 'VEFAT ('+person.OlumTarihi+')' : 'HAYATTA'}</span>
                        </div>
                    </div>
                </div>`;
            });
            resDiv.innerHTML = html;
        } catch (e) {
            resDiv.innerHTML = '<div class="alert alert-danger">‚ö†Ô∏è API Hatasƒ±! Baƒülantƒ± kurulamadƒ±.</div>';
        }
    }
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HILE_WROX VIP PANEL</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --bg: #0a0f1e; --card: #161d31; --primary: #3b82f6; --text: #d0d2d6; }
        body { background-color: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; }
        
        /* Hamburger Men√º Stili */
        .sidebar { position: fixed; left: -260px; top: 0; width: 260px; height: 100%; background: var(--card); transition: 0.3s; z-index: 1000; border-right: 1px solid #283046; }
        .sidebar.active { left: 0; }
        .sidebar-link { padding: 15px 20px; display: block; color: var(--text); text-decoration: none; border-bottom: 1px solid #283046; }
        .sidebar-link:hover { background: #1f2945; color: var(--primary); }

        /* Kart ve Sonu√ßlar */
        .main-card { background: var(--card); border-radius: 10px; padding: 25px; margin-top: 20px; border: 1px solid #283046; }
        .res-box { background: #101624; border: 1px solid #3b4253; border-radius: 8px; padding: 15px; margin-bottom: 15px; border-left: 5px solid var(--primary); }
        .info-label { color: #82868b; font-size: 0.85rem; font-weight: bold; }
        .info-value { color: #fff; font-size: 1rem; margin-bottom: 5px; }
        
        .nav-header { background: var(--card); padding: 15px; display: flex; align-items: center; border-bottom: 1px solid #283046; }
        .hamburger { font-size: 24px; cursor: pointer; color: var(--primary); }
        .overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:999; }
    </style>
</head>
<body>

<div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

<div class="sidebar" id="sidebar">
    <div class="p-4 text-center border-bottom border-secondary">
        <h4 class="text-primary fw-bold">HILE_WROX</h4>
        <span class="badge bg-danger">VIP ACCESS</span>
    </div>
    <div class="sidebar-links mt-2">
        <a href="#" class="sidebar-link" onclick="setup('soyagaci', 'üß¨ Soyaƒüacƒ± PRO')"><i class="fa fa-dna me-2"></i> Soyaƒüacƒ±</a>
        <a href="#" class="sidebar-link" onclick="setup('sulale', 'üå≥ S√ºlale Sorgu')"><i class="fa fa-tree me-2"></i> S√ºlale</a>
        <a href="#" class="sidebar-link" onclick="setup('adsoyadpro', 'üë§ Ad Soyad ƒ∞l PRO')"><i class="fa fa-users me-2"></i> Ad Soyad ƒ∞l</a>
        <a href="#" class="sidebar-link" onclick="setup('tcpro', 'üÜî TC PRO')"><i class="fa fa-id-card me-2"></i> TC PRO</a>
        <a href="#" class="sidebar-link" onclick="setup('isyeri', 'üè¢ ƒ∞≈üyeri Sorgu')"><i class="fa fa-briefcase me-2"></i> ƒ∞≈üyeri</a>
        <a href="#" class="sidebar-link" onclick="setup('isyeriark', 'üë• ƒ∞≈ü Arkada≈ülarƒ±')"><i class="fa fa-user-group me-2"></i> ƒ∞≈ü Arkada≈üƒ±</a>
        <a href="#" class="sidebar-link" onclick="setup('adrespro', 'üìç Adres PRO')"><i class="fa fa-map-location-dot me-2"></i> Adres PRO</a>
        <a href="#" class="sidebar-link" onclick="setup('gsmtc', 'üìû GSM -> TC')"><i class="fa fa-phone me-2"></i> GSM -> TC</a>
        <a href="#" class="sidebar-link" onclick="setup('okulno', 'üéì Okul No')"><i class="fa fa-school me-2"></i> Okul No</a>
        <a href="#" class="sidebar-link" onclick="setup('iban', 'üí≥ IBAN √á√∂z√ºc√º')"><i class="fa fa-credit-card me-2"></i> IBAN √á√∂z√ºc√º</a>
    </div>
</div>

<div class="nav-header">
    <i class="fa fa-bars hamburger" onclick="toggleSidebar()"></i>
    <h5 class="ms-3 mb-0" id="panel-title">üß¨ Soyaƒüacƒ± PRO</h5>
</div>

<div class="container pb-5">
    <div class="main-card shadow-lg">
        <div id="input-container">
            <label class="mb-2">TC Kimlik Numarasƒ±:</label>
            <input type="text" id="val1" class="form-control mb-3 bg-dark text-white border-secondary" placeholder="11 haneli TC girin...">
        </div>
        <button class="btn btn-primary w-100 fw-bold p-3" onclick="executeSorgu()">SORGULA</button>
    </div>

    <div id="loader" class="text-center mt-5" style="display:none;">
        <div class="spinner-border text-primary"></div>
        <p class="mt-2">Veriler derinlemesine taranƒ±yor...</p>
    </div>

    <div id="results" class="mt-4"></div>
</div>

<script>
    let currentOp = 'soyagaci';

    function toggleSidebar() {
        document.getElementById('sidebar').classList.toggle('active');
        const overlay = document.getElementById('overlay');
        overlay.style.display = (overlay.style.display === 'block') ? 'none' : 'block';
    }

    function setup(op, title) {
        currentOp = op;
        document.getElementById('panel-title').innerText = title;
        const container = document.getElementById('input-container');
        document.getElementById('results').innerHTML = "";
        
        if(op === 'adsoyadpro') {
            container.innerHTML = `
                <input type="text" id="ad" class="form-control mb-2 bg-dark text-white border-secondary" placeholder="ƒ∞sim">
                <input type="text" id="soyad" class="form-control mb-2 bg-dark text-white border-secondary" placeholder="Soyisim">
                <input type="text" id="il" class="form-control mb-3 bg-dark text-white border-secondary" placeholder="ƒ∞l (T√ºm TR i√ßin bo≈ü bƒ±rak)">
            `;
        } else {
            let label = op === 'iban' ? 'IBAN Numarasƒ±:' : (op === 'gsmtc' ? 'GSM Numarasƒ±:' : 'TC Kimlik Numarasƒ±:');
            container.innerHTML = `<label class="mb-2">${label}</label><input type="text" id="val1" class="form-control mb-3 bg-dark text-white border-secondary">`;
        }
        toggleSidebar();
    }

    async function executeSorgu() {
        const resDiv = document.getElementById('results');
        const loader = document.getElementById('loader');
        resDiv.innerHTML = "";
        loader.style.display = "block";

        let params = new URLSearchParams();
        let api_url = `https://punisher.alwaysdata.net/apiservices/${currentOp}.php`;
        
        // S√ºlale ve Diƒüer √ñzel API Yollarƒ± Fix
        if(currentOp === 'sulale') api_url = "https://arastir.sbs/api/sulale.php";
        if(currentOp === 'adrespro') api_url = "https://arastir.sbs/api/adres.php";

        if(currentOp === 'adsoyadpro') {
            params.append('ad', document.getElementById('ad').value);
            params.append('soyad', document.getElementById('soyad').value);
            params.append('il', document.getElementById('il').value);
        } else {
            let v = document.getElementById('val1').value;
            params.append('tc', v); params.append('tcno', v); params.append('gsm', v); params.append('iban', v);
        }

        try {
            const response = await fetch(api_url + "?" + params.toString());
            const json = await response.json();
            loader.style.display = "none";

            // DERƒ∞N TARAMA: Veri hangi anahtardaysa (soyagaci, data, results) onu bul.
            let rawData = json.soyagaci || json.data || json.results || json.result || json.Akrabalar || json;
            let list = Array.isArray(rawData) ? rawData : [rawData];

            if(list.length === 0 || !list[0]) {
                resDiv.innerHTML = '<div class="alert alert-warning text-center">‚ùå Kayƒ±t bulunamadƒ±.</div>';
                return;
            }

            let html = `<h5 class="mb-3 text-primary">${list.length} Sonu√ß Listelendi</h5>`;
            list.forEach(item => {
                // T√ºm bilgileri yakalamak i√ßin anahtar-deƒüer d√∂ng√ºs√º
                html += `<div class="res-box">`;
                html += `<div class="info-label">${(item.Yakinlik || item.iliski || "Kƒ∞≈ûƒ∞ Bƒ∞LGƒ∞Sƒ∞").toUpperCase()}</div>`;
                html += `<div class="info-value text-info fw-bold">${item.Ad || item.adi || ''} ${item.Soyad || item.soyadi || ''}</div>`;
                
                // Geri kalan t√ºm bilgileri dinamik ekle
                const fields = {
                    "TC": item.TC || item.tcno || item.tc_no,
                    "DOƒûUM": item.DogumTarihi || item.dogum || item.dtarih,
                    "Bƒ∞LGƒ∞": item.Adres || item.il || item.isyeri_adi || item.okul_no || item.gsm,
                    "DURUM": item.OlumTarihi ? `<span class="text-danger">VEFAT (${item.OlumTarihi})</span>` : '<span class="text-success">HAYATTA</span>'
                };

                for (let [label, val] of Object.entries(fields)) {
                    if(val && val !== "Bilinmiyor") {
                        html += `<div><span class="info-label">${label}:</span> <span class="info-value">${val}</span></div>`;
                    }
                }
                html += `</div>`;
            });
            resDiv.innerHTML = html;

        } catch (e) {
            loader.style.display = "none";
            resDiv.innerHTML = '<div class="alert alert-danger text-center">‚ö†Ô∏è Sunucu Hatasƒ±: API yanƒ±t vermiyor veya parametreler hatalƒ±.</div>';
        }
    }
</script>

</body>
</html>
